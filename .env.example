#############################################
# Embody Payments Backend environment
#############################################

# -------- Payment cadence --------
PAYMENT_INTERVAL_SECONDS=3600
PAYMENT_INCREMENT_ETH=0.00001606079
PAYMENT_PAYOUT_THRESHOLD_ETH=0.001
PAYMENT_DRY_RUN=true

# -------- Payments API --------
PAYMENTS_API_HOST=0.0.0.0
PAYMENTS_API_PORT=8081
PAYMENTS_API_ROOT_PATH=
PAYMENTS_API_ADMIN_TOKEN=
# Comma-separated tokens for read-only access (optional).
# PAYMENTS_VIEWER_TOKENS=
PAYMENTS_REGISTRATION_PER_MINUTE=5
PAYMENTS_REGISTRATION_BURST=5
PAYMENTS_SINGLE_ORCHESTRATOR_MODE=false
PAYMENTS_MISS_THRESHOLD=3
PAYMENTS_COOLDOWN_SECONDS=3600
PAYMENTS_PAYOUTS_PATH=/app/data/payouts.json

# -------- Single-orchestrator overrides (optional) --------
# Set the following only if PAYMENTS_SINGLE_ORCHESTRATOR_MODE=true
# ORCHESTRATOR_ID=example-orchestrator-001
# ORCHESTRATOR_ADDRESS=0x0000000000000000000000000000000000000000
# ORCHESTRATOR_HEALTH_URL=http://127.0.0.1:9090/health
# ORCHESTRATOR_CAPABILITY=voice-ops
# ORCHESTRATOR_CONTACT_EMAIL=ops@example.com
# ORCHESTRATOR_HOST_NAME=vtuber-node-1
# ORCHESTRATOR_HOST_PUBLIC_IP=203.0.113.10
# PAYMENTS_API_URL=https://payments.example.com
# PAYMENTS_REGISTRATION_RETRY_SECONDS=5
# PAYMENTS_REGISTRATION_RETRY_MULTIPLIER=1.8
# PAYMENTS_REGISTRATION_MAX_SECONDS=300

# Optional signing configuration (leave unset for dry-run mode)
# PAYMENT_PRIVATE_KEY=
# PAYMENT_KEYSTORE_PATH=/app/secrets/gateway-keystore.json
# PAYMENT_KEYSTORE_PASSWORD=example-password

# Optional remote signer configuration (TEE-friendly).
# If set, the backend will delegate signing to the remote signer and ignore PAYMENT_PRIVATE_KEY/KEYSTORE.
# PAYMENTS_SIGNER_ENDPOINT=vsock://16:5000
# PAYMENTS_SIGNER_TIMEOUT_SECONDS=5
# PAYMENTS_SIGNER_EXPECTED_ADDRESS=0x0000000000000000000000000000000000000000

# -------- Payout strategy (optional) --------
# Default: direct ETH transfer. For Livepeer TicketBroker redemption:
# PAYMENTS_PAYOUT_STRATEGY=livepeer_ticket
# PAYMENTS_LIVEPEER_TICKET_BROKER_ADDRESS=0xa8bb618b1520e284046f3dfc448851a1ff26e41b
# PAYMENTS_PAYOUT_CONFIRMATIONS=1
# PAYMENTS_PAYOUT_RECEIPT_TIMEOUT_SECONDS=300
# PAYMENTS_LIVEPEER_DEPOSIT_AUTOFUND=true
# PAYMENTS_LIVEPEER_DEPOSIT_TARGET_ETH=0.02
# PAYMENTS_LIVEPEER_DEPOSIT_LOW_WATERMARK_ETH=0.01
# PAYMENTS_LIVEPEER_BATCH_PAYOUTS=true
# PAYMENTS_LIVEPEER_BATCH_MAX_TICKETS=20

# -------- Top orchestrator eligibility (optional) --------
# TOP_CONTRACT_ADDRESS=0x35Bcf3c30594191d53231E4FF333E8A770453e40
# TOP_CONTRACT_FUNCTION=getTop
# TOP_CONTRACT_ABI_PATH=/app/secrets/top_contract_abi.json
# TOP_CONTRACT_ABI_JSON=

# -------- Ethereum RPC --------
ETH_RPC_URL=https://arb1.arbitrum.io/rpc
ETH_CHAIN_ID=42161

# -------- Monitoring --------
MONITORED_SERVICES=vtuber-unreal-game,vtuber-unreal-signaling,vtuber-turn-server
MIN_SERVICE_UPTIME=80.0
PAYMENTS_DEFAULT_HEALTH_TIMEOUT=5.0
PAYMENTS_DEFAULT_MIN_SERVICE_UPTIME=80.0
# When a trusted watcher (forwarder) posts /api/orchestrators/{id}/health, treat reports newer than this as authoritative.
# PAYMENTS_FORWARDER_HEALTH_TTL_SECONDS=120
PAYMENTS_AUDIT_LOG_PATH=/app/data/audit/registry.log

# -------- Session billing (Pixel Streaming usage) --------
# Token required by edges when posting session events (set on ps-gateway as PAYMENTS_SESSION_TOKEN).
# PAYMENTS_SESSION_REPORTER_TOKEN=
# Credit rate applied per active session minute (set to 0 to disable session-time credit).
# PAYMENTS_SESSION_CREDIT_ETH_PER_MINUTE=0
# Credit unit for ledger entries (eth, usd, credits, etc).
# PAYMENTS_CREDIT_UNIT=eth
# Optional storage override:
# PAYMENTS_SESSIONS_PATH=/app/data/sessions.json

# -------- Power-state metering (orchestrator uptime credits) --------
# PAYMENTS_POWER_METER_ENABLED=false
# PAYMENTS_POWER_CREDIT_ETH_PER_MINUTE=0
# PAYMENTS_POWER_POLL_SECONDS=60
# PAYMENTS_POWER_MAX_GAP_SECONDS=180
# PAYMENTS_POWER_METER_PATH=/app/data/power_meter.json

# -------- Workload verification (synthetic tests / clips) --------
# Optional run identifier to tag audit logs / summaries.
# PAYMENTS_TEST_RUN_ID=
# Workload records + artifacts (defaults are usually fine).
# PAYMENTS_WORKLOADS_PATH=/app/data/workloads.json
# PAYMENTS_WORKLOAD_ARCHIVE_BASE=/app/recordings
# Credit rate applied per verified workload minute (set to 0 to disable).
# PAYMENTS_WORKLOAD_TIME_CREDIT_ETH_PER_MINUTE=0
# Optional: workload offer catalog + orchestrator opt-in selections.
# PAYMENTS_WORKLOAD_OFFERS_PATH=/app/data/workload_offers.json
# PAYMENTS_WORKLOAD_SUBSCRIPTIONS_PATH=/app/data/workload_subscriptions.json
# PAYMENTS_WORKLOAD_SUBSCRIPTION_MAX=50

# -------- Image licensing (optional; used for protected container payloads) --------
# PAYMENTS_LICENSE_TOKENS_PATH=/app/data/license_tokens.json
# PAYMENTS_LICENSE_IMAGES_PATH=/app/data/license_images.json
# PAYMENTS_LICENSE_ACCESS_PATH=/app/data/license_access.json
# PAYMENTS_LICENSE_LEASES_PATH=/app/data/license_leases.json
# PAYMENTS_LICENSE_LEASE_SECONDS=900
# PAYMENTS_LICENSE_AUDIT_LOG_PATH=/app/data/audit/license.log
